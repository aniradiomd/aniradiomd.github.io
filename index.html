<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Аниме Радио Молдова — уют онлайн</title>
<meta name="description" content="Мы — «Аниме Радио Молдова»: уютное онлайн-радио про эмоции, тепло и вдохновение." />
<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;700&family=Noto+Sans+JP:wght@400;700&family=Sawarabi+Mincho&display=swap" rel="stylesheet">
<style>
:root{
--bg1:#071226; /* deep indigo */
--sakura1:#ffe4e8; /* softer petal */
--sakura2:#ff99b3; /* vibrant sakura */
--accent:#ff7aa2; /* warm sakura */
--accent-2:#ffd27a; /* warm gold */
--card:#07162a88;
--glass: rgba(255,255,255,0.05);
--text:#f8fbff;
--muted:#b9c6db;
--glow: rgba(255,122,162,0.3);
}
*{box-sizing:border-box;margin:0;padding:0}
html,body,#app{height:100%}
body{
font-family:'Montserrat', 'Noto Sans JP', 'Sawarabi Mincho', system-ui, sans-serif;
color:var(--text);
background: radial-gradient(1200px 600px at 10% 10%, rgba(255,119,162,0.06), transparent 10%), linear-gradient(180deg, var(--bg1) 0%, #04101a 80%);
-webkit-font-smoothing:antialiased;
-moz-osx-font-smoothing:grayscale;
overflow-x:hidden;
overflow-y:hidden; /* Disable vertical scrolling by default */
}
.scene{
position:relative;
min-height:100vh;
width:100vw;
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
padding:40px;
perspective:1000px;
overflow-x:hidden;
overflow-y:hidden; /* Disable scrolling on scene by default */
}
.scene.scroll-enabled {
    overflow-y:auto; /* Enable scrolling when playlists are active */
}
.scene::before{
content:'';
position:absolute;
top:0;
left:0;
width:100%;
height:100%;
background:radial-gradient(circle at 20% 20%, rgba(255,122,162,0.15), transparent 60%), radial-gradient(circle at 80% 80%, rgba(255,210,120,0.1), transparent 60%);
animation:bgGlow 12s ease-in-out infinite;
opacity:0.3;
z-index:1;
}
.scene::after{
content:'';
position:absolute;
top:0;
left:0;
width:100%;
height:100%;
background:linear-gradient(45deg, rgba(255,122,162,0.05), rgba(255,210,120,0.05));
animation:waveFlow 15s ease-in-out infinite;
z-index:1;
}
@keyframes bgGlow {
    0%, 100% { opacity: 0.3; transform: scale(1); }
    50% { opacity: 0.5; transform: scale(1.1); }
}
@keyframes waveFlow {
    0% { background-position: 0% 0%; }
    50% { background-position: 100% 100%; }
    100% { background-position: 0% 0%; }
}
.card{
position:relative;
z-index:6;
max-width:1100px;
width:100%;
background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
border-radius:18px;
padding:34px;
backdrop-filter:blur(8px);
box-shadow:0 20px 60px rgba(2,8,20,0.8);
border:1px solid rgba(255,255,255,0.04);
display:grid;
grid-template-columns:1fr 380px;
gap:26px;
align-items:center;
transform-style:preserve-3d;
transition: transform 0.6s ease;
}
.card:not(.playlists-active) {
    animation: cardFloat 6s ease-in-out infinite;
}
.card.playlists-active{
transform: translateY(-150px);
}
@keyframes cardFloat {
    0%, 100% { transform: translateY(0) rotateX(1deg) rotateY(1deg); }
    50% { transform: translateY(-10px) rotateX(-1deg) rotateY(-1deg); }
}
/* Left column */
.brand{display:flex;flex-direction:column;gap:12px}
.logo{display:flex;align-items:center;gap:14px}
.logo .badge{
width:92px;
height:92px;
border-radius:18px;
background:linear-gradient(135deg, var(--sakura2), var(--accent-2));
display:flex;
align-items:center;
justify-content:center;
font-weight:800;
font-family:'Sawarabi Mincho';
font-size:28px;
box-shadow:0 12px 30px var(--glow);
transform:rotate(-6deg) scale(1);
color:#fff;
animation:shimmer 3s infinite ease-in-out;
}
.logo h1{font-family:'Sawarabi Mincho';font-size:28px;letter-spacing:0.8px;}
.desc{
color:var(--muted);
max-width:640px;
line-height:1.5;
font-family:'Sawarabi Mincho';
word-break: break-word;
overflow-wrap: break-word;
animation: fadeIn 1.2s ease-out;
}
.headline{
font-size:38px;
font-weight:800;
line-height:1.1;
display:flex;
gap:12px;
align-items:center;
font-family:'Noto Sans JP';
text-shadow:0 2px 10px var(--glow);
}
.headline .jwords{display:flex;gap:8px;align-items:center}
.jtag{
background:linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
padding:6px 12px;
border-radius:10px;
font-family:'Sawarabi Mincho';
font-weight:700;
transition: all 0.3s ease;
box-shadow:0 2px 10px var(--glow);
}
.jtag:hover{
transform:scale(1.12) rotate(2deg);
box-shadow:0 6px 20px var(--glow);
}
.text-animate{display:inline-block;overflow:hidden;vertical-align:bottom}
.text-animate span{
display:inline-block;
transform:translateY(110%);
animation:slideUp 1s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}
@keyframes slideUp{to{transform:translateY(0)}}
@keyframes shimmer {
    0% { background: linear-gradient(135deg, var(--sakura2), var(--accent-2)); }
    50% { background: linear-gradient(135deg, #ff4c8a, #ff99b3, #ff4c8a, #ffd27a); background-size: 200% 200%; }
    100% { background: linear-gradient(135deg, var(--sakura2), var(--accent-2)); }
}
@keyframes fadeIn {
    0% { opacity: 0; transform: translateY(10px); }
    100% { opacity: 1; transform: translateY(0); }
}
/* Right column - player */
.playerBox{
background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.08));
border-radius:14px;
padding:18px;
border:1px solid rgba(255,255,255,0.04);
box-shadow:0 8px 20px rgba(0,0,0,0.3);
transition: transform 0.3s ease;
}
.playerBox:hover{transform:scale(1.02);}
.cover{
height:170px;
border-radius:12px;
background-image:linear-gradient(120deg, rgba(255,255,255,0.03), rgba(0,0,0,0.15)), url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="800" height="800"><rect width="100%" height="100%" fill="%23040b12"/><g fill="%23ff99b3" opacity="0.14"><circle cx="680" cy="100" r="260"/><circle cx="140" cy="690" r="200"/></g></svg>');
background-size:cover;
display:flex;
align-items:flex-end;
padding:12px;
color:var(--text);
font-weight:700;
font-family:'Sawarabi Mincho';
position:relative;
overflow:hidden;
}
.cover::before{
content:'';
position:absolute;
top:0;
left:0;
width:100%;
height:100%;
background: radial-gradient(circle at 20% 20%, rgba(255,122,162,0.2), transparent 60%);
opacity:0.4;
}
.controls{display:flex;gap:12px;align-items:center;margin-top:14px}
.btn{
cursor:pointer;
padding:12px 18px;
border-radius:12px;
border:1px solid rgba(255,255,255,0.06);
background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.08));
font-weight:800;
font-family:'Sawarabi Mincho';
display:inline-flex;
gap:10px;
align-items:center;
transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
.btn:hover{
transform: translateY(-4px) scale(1.05);
box-shadow:0 8px 20px var(--glow);
}
.icon{width:20px;height:20px;display:inline-block}
.playCircle{
width:44px;
height:44px;
border-radius:12px;
display:inline-flex;
align-items:center;
justify-content:center;
background:linear-gradient(135deg, var(--sakura2), #ff9ab8);
box-shadow:0 12px 30px var(--glow);
border:1px solid rgba(255,255,255,0.06);
transition: transform 0.3s ease;
}
.btn.play{
background:linear-gradient(90deg, rgba(255,122,162,0.14), rgba(255,210,120,0.08));
box-shadow:0 10px 26px var(--glow);
color: #fff; /* Set text color to white for play button */
}
.btn.play:hover .playCircle{transform:rotate(360deg);}
.btn.highlight{
background: linear-gradient(135deg, var(--accent-2), #ffe0a0);
color: #040b12;
box-shadow:0 12px 30px rgba(255,210,120,0.3);
border:1px solid rgba(255,255,255,0.1);
}
.btn.highlight svg path{stroke:#040b12;}
.meta{
margin-top:12px;
color:var(--muted);
font-size:13px;
font-family:'Sawarabi Mincho';
}
.footer{
grid-column:1 / -1;
margin-top:18px;
display:flex;
justify-content:space-between;
align-items:center;
color:var(--muted);
font-size:13px;
font-family:'Sawarabi Mincho';
}
.playlists-section{
max-width:1100px;
width:100%;
margin:40px 0;
z-index:6;
display:none; /* Hidden by default */
opacity:0;
transform: translateY(20px);
transition: opacity 0.5s ease, transform 0.5s ease;
}
.playlists-section.active{
display:block;
opacity:1;
transform: translateY(0);
}
.playlists-section h2{
font-family:'Sawarabi Mincho';
font-size:28px;
font-weight:700;
color:var(--text);
text-shadow:0 2px 10px var(--glow);
margin-bottom:24px;
text-align:center;
animation:fadeIn 1.2s ease-out;
}
.playlists{
display:grid;
grid-template-columns:repeat(auto-fit, minmax(250px, 1fr));
gap:20px;
padding:10px;
}
.playlist-card{
background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
border-radius:12px;
padding:16px;
backdrop-filter:blur(6px);
border:1px solid rgba(255,255,255,0.04);
transition: all 0.3s ease;
transform-style:preserve-3d;
opacity:0;
transform: translateY(30px);
}
.playlist-card:nth-child(1) { transition-delay: 0.1s; }
.playlist-card:nth-child(2) { transition-delay: 0.2s; }
.playlist-card:nth-child(3) { transition-delay: 0.3s; }
.playlist-card:nth-child(4) { transition-delay: 0.4s; }
.playlist-card:nth-child(5) { transition-delay: 0.5s; }
.playlist-card:nth-child(6) { transition-delay: 0.6s; }
.playlists-section.active .playlist-card{
opacity:1;
transform: translateY(0);
}
.playlist-card:hover{
transform: translateY(-6px) scale(1.03);
box-shadow:0 12px 30px var(--glow);
}
.playlist-img{
width:100%;
height:150px;
border-radius:10px;
background-size:cover;
background-position:center;
position:relative;
overflow:hidden;
}
.playlist-img::before{
content:'';
position:absolute;
top:0;
left:0;
width:100%;
height:100%;
background:radial-gradient(circle at 20% 20%, var(--glow), transparent 60%);
opacity:0.5;
transition: opacity 0.3s ease;
}
.playlist-card:hover .playlist-img::before{opacity:0.7;}
.playlist-title{
font-family:'Sawarabi Mincho';
font-size:18px;
font-weight:700;
margin-top:12px;
color:var(--text);
text-shadow:0 1px 6px var(--glow);
}
.playlist-desc{
font-family:'Sawarabi Mincho';
font-size:13px;
color:var(--muted);
margin-top:8px;
line-height:1.4;
}
@media (max-width:980px){
.card{grid-template-columns:1fr;gap:18px}
.cover{height:140px}
.headline{font-size:28px}
.kanji{display:none;}
.card.playlists-active{transform: translateY(-100px);}
}
.kanji{
position:absolute;
right:48px;
top:24px;
font-family:'Sawarabi Mincho';
font-weight:700;
color:rgba(255,255,255,0.05);
font-size:130px;
transform:rotate(-10deg);
pointer-events:none;
text-shadow:0 2px 10px var(--glow);
animation:kanjiGlow 4s ease-in-out infinite;
}
@keyframes kanjiGlow {
    0%, 100% { opacity: 0.05; text-shadow: 0 2px 10px var(--glow); }
    50% { opacity: 0.08; text-shadow: 0 4px 20px var(--glow); }
}
.ornament{
position:absolute;
left:28px;
bottom:32px;
opacity:.95;
font-size:12px;
color:var(--muted);
font-family:'Sawarabi Mincho';
}
.petal{
position:absolute;
width:28px;
height:20px;
background:radial-gradient(circle at 30% 28%, rgba(255,255,255,0.95), rgba(255,255,255,0.3) 20%, transparent 60%), linear-gradient(180deg, var(--sakura1), var(--sakura2));
border-radius:40% 60% 50% 50%;
filter:drop-shadow(0 8px 18px rgba(0,0,0,0.25));
transform-origin:center center;
pointer-events:none;
will-change:transform, opacity;
z-index:2;
}
.petal:before{
content:'';
position:absolute;
left:48%;
top:30%;
width:4px;
height:4px;
background:rgba(255,255,255,0.4);
border-radius:50%;
transform:translateX(-50%);
}
@keyframes floatPetal {
    0% { transform: translate3d(var(--x1), var(--y1), 0) rotate(var(--r1)) scale(0.8); opacity: 0; }
    10% { opacity: 0.9; }
    50% { transform: translate3d(var(--x3), var(--y3), 0) rotate(var(--r3)) scale(1); }
    90% { opacity: 0.9; }
    100% { transform: translate3d(var(--x2), var(--y2), 0) rotate(var(--r2)) scale(0.8); opacity: 0; }
}
.star{
position:absolute;
width:4px;
height:4px;
background:radial-gradient(circle, rgba(255,255,255,0.9), rgba(255,122,162,0.3));
border-radius:50%;
filter:drop-shadow(0 0 8px rgba(255,122,162,0.4));
pointer-events:none;
will-change:transform, opacity;
z-index:2;
}
@keyframes twinkle {
    0%, 100% { opacity: 0.4; transform: scale(0.8); }
    50% { opacity: 1; transform: scale(1.2); }
}
.pulse{animation:pulseGlow 3s ease-in-out infinite}
@keyframes pulseGlow{
    0% { box-shadow: 0 6px 22px var(--glow); }
    50% { box-shadow: 0 18px 44px var(--glow); }
    100% { box-shadow: 0 6px 22px var(--glow); }
}
#equalizer {
    display:none;
    align-items:flex-end;
    gap:4px;
    height:40px;
}
.eq-bar {
    width:6px;
    background:linear-gradient(135deg, var(--sakura2), #ffe0a3);
    border-radius:3px;
    animation:bar-up-down 1.4s ease-in-out infinite alternate;
}
.eq-bar:nth-child(1) { animation-delay: -0.3s; }
.eq-bar:nth-child(2) { animation-delay: -0.9s; }
.eq-bar:nth-child(3) { animation-delay: -0.5s; }
.eq-bar:nth-child(4) { animation-delay: -0.7s; }
.eq-bar:nth-child(5) { animation-delay: -0.4s; }
@keyframes bar-up-down {
    0% { height: 10%; transform: scaleY(0.8); }
    50% { height: 100%; transform: scaleY(1.2); }
    100% { height: 30%; transform: scaleY(0.9); }
}
</style>
</head>
<body>
<div id="app" class="scene">
<!-- Dynamic petals and stars generated by JS -->
<div class="card" role="region" aria-label="Аниме Радио Молдова">
<div class="brand">
<div class="logo">
<div class="badge">愛</div>
<div>
<h1>Аниме Радио Молдова</h1>
<div class="meta">Уют — Любовь • Сакура — Гармония</div>
</div>
</div>
<div class="headline">
<div class="jwords">
<div class="jtag">愛</div>
<div class="jtag">桜</div>
</div>
</div>
<p class="desc">Мы — «Аниме Радио Молдова»: уютное онлайн-радио про эмоции, тепло и вдохновение. Здесь звучат любимые аниме-темы и мягкие подборки, которые помогают сосредоточиться, мечтать и отдыхать.</p>
<div style="display:flex;gap:12px;margin-top:14px;flex-wrap:wrap">
<button id="playBtn" class="btn play" aria-pressed="false">
<span class="playCircle" aria-hidden="true"><svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 5v14l11-7L8 5z" fill="#fff"/></svg></span>
<span>Прямой эфир</span>
</button>
<a href="https://aniradiomd.radio12345.com" target="_blank" class="btn highlight">
<svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M14 3h7v7" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M21 3L10 14" stroke="currentColor" stroke-opacity="0.95" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
<span>Внешний плеер</span>
</a>
<button id="playlistsBtn" class="btn highlight" aria-pressed="false">
<svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M3 6h18M3 12h18M3 18h12" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
<span>Плейлисты</span>
</button>
</div>
<div class="meta" style="margin-top:10px">КОНТАКТ: <a href="mailto:hello@anime-radio.md" style="color:var(--accent-2);text-decoration:none">hello@anime-radio.md</a></div>
</div>
<div class="playerBox" id="playerBox" aria-hidden="false">
<div class="cover">
<div>
<div style="font-size:13px;opacity:.95">Сейчас в эфире</div>
<div style="font-size:18px;font-weight:900;margin-top:6px">Мелодии: уютные аниме-плейлисты</div>
<div id="equalizer">
<span class="eq-bar"></span>
<span class="eq-bar"></span>
<span class="eq-bar"></span>
<span class="eq-bar"></span>
<span class="eq-bar"></span>
</div>
</div>
</div>
<div class="controls">
<button id="miniPlay" class="btn play" aria-label="Play">
<span class="playCircle" aria-hidden="true"><svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8 5v14l11-7L8 5z" fill="#fff"/></svg></span>
<span>▶︎</span>
</button>
<div style="flex:1">
<div style="font-weight:800">Прямой эфир</div>
<div style="font-size:13px;color:var(--muted)">Источник: локальный стрим</div>
</div>
<div style="text-align:right;min-width:140px">
<div style="font-size:12px;color:var(--muted)">КУЛЬТОвый Босс</div>
<div style="font-weight:900">— Ламиднист</div>
</div>
</div>
<div class="meta">Нажмите «Прямой эфир» чтобы запустить поток.</div>
</div>
<div class="footer">
<div>© Аниме Радио Молдова — Любовь • Сакура • Уют</div>
<div>Контакт: hello@anime-radio.md</div>
</div>
</div>
<div class="playlists-section" id="playlistsSection">
<h2>Наши плейлисты</h2>
<div class="playlists">
<div class="playlist-card">
<div class="playlist-img" style="background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"800\" height=\"800\"><rect width=\"100%\" height=\"100%\" fill=\"%23040b12\"/><g fill=\"%23ff99b3\" opacity=\"0.2\"><circle cx=\"600\" cy=\"200\" r=\"300\"/><circle cx=\"200\" cy=\"600\" r=\"200\"/></g></svg>');"></div>
<div class="playlist-title">Сакура Lo-Fi</div>
<div class="playlist-desc">Мягкие лоу-фай мелодии с аниме-вайбом для учебы и релакса.</div>
</div>
<div class="playlist-card">
<div class="playlist-img" style="background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"800\" height=\"800\"><rect width=\"100%\" height=\"100%\" fill=\"%23040b12\"/><g fill=\"%23ffd27a\" opacity=\"0.2\"><circle cx=\"650\" cy=\"150\" r=\"280\"/><circle cx=\"150\" cy=\"650\" r=\"180\"/></g></svg>');"></div>
<div class="playlist-title">Аниме Ностальгия</div>
<div class="playlist-desc">Классические опенинги и эндинги аниме 90-х и 2000-х.</div>
</div>
<div class="playlist-card">
<div class="playlist-img" style="background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"800\" height=\"800\"><rect width=\"100%\" height=\"100%\" fill=\"%23040b12\"/><g fill=\"%23ff7aa2\" opacity=\"0.2\"><circle cx=\"700\" cy=\"100\" r=\"260\"/><circle cx=\"100\" cy=\"700\" r=\"200\"/></g></svg>');"></div>
<div class="playlist-title">Ночной Токио</div>
<div class="playlist-desc">Атмосферные треки для ночных размышлений под неоновым светом.</div>
</div>
<div class="playlist-card">
<div class="playlist-img" style="background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"800\" height=\"800\"><rect width=\"100%\" height=\"100%\" fill=\"%23040b12\"/><g fill=\"%23ff99b3\" opacity=\"0.2\"><circle cx=\"620\" cy=\"180\" r=\"290\"/><circle cx=\"180\" cy=\"620\" r=\"210\"/></g></svg>');"></div>
<div class="playlist-title">Звездный Вайб</div>
<div class="playlist-desc">Эпичные аниме-саундтреки для вдохновения и мечтаний о космосе.</div>
</div>
<div class="playlist-card">
<div class="playlist-img" style="background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"800\" height=\"800\"><rect width=\"100%\" height=\"100%\" fill=\"%23040b12\"/><g fill=\"%23ffd27a\" opacity=\"0.2\"><circle cx=\"670\" cy=\"130\" r=\"270\"/><circle cx=\"130\" cy=\"670\" r=\"190\"/></g></svg>');"></div>
<div class="playlist-title">Летний Бриз</div>
<div class="playlist-desc">Легкие и свежие мелодии для летних вечеров с аниме-атмосферой.</div>
</div>
<div class="playlist-card">
<div class="playlist-img" style="background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"800\" height=\"800\"><rect width=\"100%\" height=\"100%\" fill=\"%23040b12\"/><g fill=\"%23ff7aa2\" opacity=\"0.2\"><circle cx=\"690\" cy=\"110\" r=\"280\"/><circle cx=\"110\" cy=\"690\" r=\"220\"/></g></svg>');"></div>
<div class="playlist-title">Городские Огни</div>
<div class="playlist-desc">Энергичные треки для прогулок по ярким городским улицам.</div>
</div>
</div>
</div>
<div class="kanji">桜</div>
<div class="ornament">Made with Сакура &amp; Lo-Fi vibes</div>
<!-- audio element for direct stream -->
<audio id="liveAudio" preload="none" crossorigin="anonymous">
<source src="https://uk16freenew.listen2myradio.com/live.mp3?typeportmount=s1_27428_stream_585428507" type="audio/mpeg">
Ваш браузер не поддерживает аудио.
</audio>
</div>
<script>
// Проверка наличия всех DOM-элементов
const playBtn = document.getElementById('playBtn');
const miniPlay = document.getElementById('miniPlay');
const audio = document.getElementById('liveAudio');
const playlistsBtn = document.getElementById('playlistsBtn');
const playlistsSection = document.getElementById('playlistsSection');
const card = document.querySelector('.card');
const scene = document.querySelector('.scene');
const playerBox = document.getElementById('playerBox');
const equalizer = document.getElementById('equalizer');

let playing = false;
let playlistsVisible = false;

// Функция для управления состоянием плеера
function setPlaying(state) {
    if (!playBtn || !miniPlay || !playerBox || !equalizer) return;
    playing = state;
    playBtn.querySelector('span:nth-child(2)').textContent = state ? 'Пауза' : 'Прямой эфир';
    miniPlay.querySelector('span:nth-child(2)').textContent = state ? '▮▮' : '▶︎';
    playBtn.setAttribute('aria-pressed', state ? 'true' : 'false');
    if (state) {
        playerBox.classList.add('pulse');
        equalizer.style.display = 'flex';
    } else {
        playerBox.classList.remove('pulse');
        equalizer.style.display = 'none';
    }
}

// Функция для управления видимостью плейлистов и скроллингом
function togglePlaylists() {
    playlistsVisible = !playlistsVisible;
    playlistsSection.classList.toggle('active', playlistsVisible);
    card.classList.toggle('playlists-active', playlistsVisible);
    scene.classList.toggle('scroll-enabled', playlistsVisible);
    playlistsBtn.querySelector('span:nth-child(2)').textContent = playlistsVisible ? 'Скрыть плейлисты' : 'Плейлисты';
    playlistsBtn.setAttribute('aria-pressed', playlistsVisible ? 'true' : 'false');
}

// Обработчик для кнопки "Прямой эфир"
if (playBtn && audio) {
    playBtn.addEventListener('click', async () => {
        try {
            if (!playing) {
                await audio.play();
                setPlaying(true);
            } else {
                audio.pause();
                setPlaying(false);
            }
        } catch (e) {
            console.error('Не удалось запустить поток. Проверьте соединение или разрешения браузера.', e);
            const messageBox = document.createElement('div');
            messageBox.style.cssText = 'position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);padding:20px;background:rgba(255,255,255,0.1);border-radius:10px;backdrop-filter:blur(5px);z-index:100;color:white;text-align:center;box-shadow:0 4px 15px rgba(0,0,0,0.3);font-family:"Sawarabi Mincho";';
            messageBox.textContent = 'Не удалось запустить поток. Проверьте соединение или разрешения браузера.';
            document.body.appendChild(messageBox);
            setTimeout(() => messageBox.remove(), 4000);
        }
    });
}

// Обработчик для мини-кнопки воспроизведения
if (miniPlay) {
    miniPlay.addEventListener('click', () => {
        if (playBtn) playBtn.click();
    });
}

// Обработчик для кнопки "Плейлисты"
if (playlistsBtn && playlistsSection && card && scene) {
    playlistsBtn.addEventListener('click', togglePlaylists);
}

// Генерация лепестков и звезд
if (scene) {
    const petalsCount = 60;
    for (let i = 0; i < petalsCount; i++) {
        const p = document.createElement('div');
        p.className = 'petal';
        const w = 18 + Math.round(Math.random() * 22);
        const h = Math.round(w * 0.7);
        p.style.width = w + 'px';
        p.style.height = h + 'px';
        p.style.setProperty('--x1', (Math.random() * 100 - 10) + 'vw');
        p.style.setProperty('--y1', (-10 - Math.random() * 20) + 'vh');
        p.style.setProperty('--r1', (Math.random() * 360) + 'deg');
        p.style.setProperty('--x2', (Math.random() * 100 - 10) + 'vw');
        p.style.setProperty('--y2', (110 + Math.random() * 20) + 'vh');
        p.style.setProperty('--r2', (Math.random() * 360 + 360) + 'deg');
        p.style.setProperty('--x3', (Math.random() * 100 - 10) + 'vw');
        p.style.setProperty('--y3', (Math.random() * 100) + 'vh');
        p.style.setProperty('--r3', (Math.random() * 360 + 180) + 'deg');
        const dur = 8 + Math.random() * 12;
        const delay = Math.random() * -12;
        p.style.animation = `floatPetal ${dur}s cubic-bezier(0.4, 0, 0.2, 1) ${delay}s infinite`;
        p.style.opacity = 0.7 + Math.random() * 0.3;
        scene.appendChild(p);
    }

    const starsCount = 20;
    for (let i = 0; i < starsCount; i++) {
        const s = document.createElement('div');
        s.className = 'star';
        s.style.left = (Math.random() * 100) + 'vw';
        s.style.top = (Math.random() * 100) + 'vh';
        const dur = 2 + Math.random() * 3;
        const delay = Math.random() * -5;
        s.style.animation = `twinkle ${dur}s ease-in-out ${delay}s infinite`;
        scene.appendChild(s);
    }
}

// Обработчики событий для аудио
if (audio) {
    audio.addEventListener('playing', () => setPlaying(true));
    audio.addEventListener('pause', () => setPlaying(false));
    audio.addEventListener('error', () => setPlaying(false));
}
</script>
</body>
</html>
